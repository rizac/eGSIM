<p><b>Endpoint: <code>{{ baseurl }}/{{ data.path }}</code></b></p>

<p>
eGSIM, through the GMPE-SMTK library, offers the ability to test observed ground motions with
the GMPE model predictions using the GMPE implementations found inside OpenQuake and
one or more measures of fit.
</p>
 
<h3 id="{{ data.key }}_request">Request</h3>
<p>
A request to the Residuals plot service requires a list of GMPEs and IMTs, a Ground Motion
database (GMDB) and the the desired plot type.
</p>

<table class='request'>
	{% include "apidoc/request_template.html" with form=data.form %}
</table>

<div class='footnote'>
Notes:
<ul>
	<li>"SA" in {{ data.form.imt.name }} must be provided
		with the given period in parentheses, e.g. "SA(0.2)"
	<li>{{ data.form.gsim.name }} and 
		{{ data.form.imt.name }}
		can be input as space- or comma-separated lists of values. They can also be input with
		<a href="https://docs.python.org/3/library/fnmatch.html" target="_blank">wildcards</a>:
		eGSIM will then select all matching items (wildcards are not implemented in the GUI)
	<li>The selection expression syntax has already been discussed in the
		relative <a href="#selexpr">section above</a>
</ul>
</div>


<h3 id="{{ data.key }}_response">Response</h3>

<p>
The reponse Object is of tyhis type is an Object with keys representing
the choosen measures of fit (MOF), mapped to the choosen IMTs.
Each IMT is in turn an Object of chosen GSIMs mapped to the 
the the model-to-data value.
Note that from a single MOF of the request
several Measure of fit might be returned in response
(e.g., choosing 'res' the MOFs in the request
will return are six measure of fit in the response:
"Residuals Inter event Mean", "Residuals Inter event Std Dev",
"Residuals Intra event Mean", "Residuals Intra event Std Dev",
"Residuals Total Mean" and "Residuals Total Std Dev").
</p>
            
<pre><code class="language-python">{
	"Measure of fit": 
		"Residuals inter event mean": {
			"PGA": {
				"BindiEtAl2011": 0.01,
				"CauzziEtAl2014": 0.02,
				...
			},
			"PGV": {
				# same Object type as above,
				# computed for a different IMT
			},
			...
		},
		"Residuals inter event stddev": {
				# same Object type as above,
				# computed for a different MOF
		},
		"Residuals intra event mean": {
				# same Object type as above,
				# computed for a different MOF
		},
		"Residuals intra event stddev": {
				# same Object type as above,
				# computed for a different MOF
		},
		"Residuals total mean": {
				# same Object type as above,
				# computed for a different MOF
		},
		"Residuals total stddev": {
				# same Object type as above,
				# computed for a different MOF
		},
		"Likelihood inter event median": {     # see note 1
				# same Object type as above,
				# computed for a different MOF
		},
		"Likelihood intra event median": {     # see note 1
				# same Object type as above,
				# computed for a different MOF
		},
		"Likelihood total median": {           # see note 1
				# same Object type as above,
				# computed for a different MOF
		},
		"Likelihood inter event iqr": {        # see note 1
				# same Object type as above,
				# computed for a different MOF
		},
		"Likelihood intra event iqr": {        # see note 1
				# same Object type as above,
				# computed for a different MOF
		},
		"Likelihood total iqr": {              # see note 1
				# same Object type as above,
				# computed for a different MOF
		},
		"Log-likelihood": {
				# same Object type as above,
				# computed for a different MOF
		},
		"Multivariate log-likelihood": {       # see note 1
				# same Object type as above,
				# computed for a different MOF
		},
		"Euclidean distance-based ranking mde norm": {    # see note 2
				# same Object type as above,
				# computed for a different MOF
		},
		"Euclidean distance-based ranking sqrt kappa": {  # see note 2
				# same Object type as above,
				# computed for a different MOF
		},
		"Euclidean distance-based ranking edr": {         # see note 2
				# same Object type as above,
				# computed for a different MOF
		}
	},
	"Db records": {
		"BindiEtAl2011": 1023,
		"CauzziEtAl2014": 2012,
		...
	},
	"Gsim skipped":{
		"AbrahamsonEtAl2014NSHMPUpper": "No db record found",
		...
	}
}</code></pre>

<div class='footnote'>
Notes:
<ol>
<li>LLH and MultivariateLLH include also the IMT "All"
<li>Euclidean Distance-Based
	are not associated with any IMT, thus their values will be an Object
	keyed by "" and associated to each {GMPE: value} pairs.
</ol>
</div>


<table class='csv'>
<tbody>
<tr>
	<td>measure of fit</td>
	<td>imt</td>
	<td>gsim</td>
	<td>value</td>
	<td>db records used</td>
</tr>
<tr>
	<td>Residuals inter event mean</td>
	<td>PGA</td>
	<td>BindiEtAl2011</td>
	<td>&hellip;</td>
	<td>&hellip;</td>
</tr>
<tr>
	<td>Residuals inter event mean</td>
	<td>PGA</td>
	<td>CauzziEtAl2014</td>
	<td>&hellip;</td>
	<td>&hellip;</td>
</tr>
<tr>
	<td>&hellip;</td>
	<td>&hellip;</td>
	<td>&hellip;</td>
	<td>&hellip;</td>
	<td>&hellip;</td>
</tr>
<tr>
	<td>Residuals intra event mean</td>
	<td>PGA</td>
	<td>BindiEtAl2011</td>
	<td>&hellip;</td>
	<td>&hellip;</td>
</tr>
<tr>
	<td>&hellip;</td>
	<td>&hellip;</td>
	<td>&hellip;</td>
	<td>&hellip;</td>
	<td>&hellip;</td>
</tr>
<tr>
	<td>Residuals Inter event Mean</td>
	<td>PGV</td>
	<td>BindiEtAl2011</td>
	<td>&hellip;</td>
	<td>&hellip;</td>
</tr>
<tr>
	<td>Residuals Inter event Mean</td>
	<td>PGV</td>
	<td>CauzziEtAl2014</td>
	<td>&hellip;</td>
	<td>&hellip;</td>
</tr>
<tr>
	<td>&hellip;</td>
	<td>&hellip;</td>
	<td>&hellip;</td>
	<td>&hellip;</td>
	<td>&hellip;</td>
</tr>
</tbody>
</table>

<div class='footnote'>
Notes:
<ul>
<li>The GSIM with no database records ot that were not calculated (due to errors)
	are not reported in the format above
</ul>
</div>